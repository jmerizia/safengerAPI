import numpy as np
import json

alph = "_qQwWaAzZxXsScCdDeErRfFvVtTbDgGhHyYnNjJmMuUkKiIlLoOpP"

f = lambda x: 1.0/(1.0 + np.exp(-5*x))

def parseMessage(words):
    indices = []
    for i in range(len(words)):
        indices.append([])
        for n in xrange(10): # only take the first 144 characters
            if n < len(words[i]):
                if words[i][n] in alph:
                    indices[i].append(float(alph.index(words[i][n])) / 100)
            else:
                indices[i].append(float(alph.index("_")) / 100)
    return indices

WW1 = [[-2.0244096625301955, 2.0310245927854416, -0.7157169789466636, -1.4187371305435375, 0.9175412783358785, 0.17005908179260593, 0.27177957472423336, 0.6826098743132641], [3.9521172151965764, -1.1684286421907277, 1.740864187093912, -0.5840133834669409, -0.15030569454626064, -0.14896078131100846, 0.7180523398351781, -0.07106702812997237], [-1.6159748225593098, 0.5584517730054209, 1.2876541283980494, 1.734060965002969, -1.4004452115373704, 6.129922606700708, 1.5932642727513215, -1.669524236719387], [-1.4776794827215123, -2.082655342941541, 1.5357991545640102, 2.6142495378826673, 0.27298082597243534, -1.5893517805861161, 2.380692782443539, 3.57326920723731], [-1.1808763166958156, 1.982612951013246, -1.7821600881302513, 2.1026007165556, 0.2999150645995435, 2.958436586160909, 0.7078833235126786, 1.6063548410018416], [-2.17315771746998, 0.8635776532310507, 2.8687134203758666, -1.5989160352111043, 3.4556509783314393, 3.229435060462005, -1.5750428755106902, 0.15787426448262623], [1.348826799121721, 2.2342528340522225, -0.1756846010620586, -0.5514944219263371, 4.767780911413402, 3.2536163501146143, -4.0124567431071, 1.1483747681187675], [3.5759234920411203, 1.0306774764163964, 0.9300409770383075, -0.22375869468441345, -2.801859752388939, 1.1010531599458955, 0.26763455540087133, 4.65903690074002], [1.3110908261073813, -0.70742893718823, 3.18224385964967, -0.30609562279416314, 3.1788988031684497, 0.037790233097151134, -0.7382130502209546, 0.5315948256267206], [1.213713219507916, -1.4096757786423344, -2.0133651539530746, -0.6018747008714922, 1.2598934632734833, -1.7471571308928704, 1.6440945323292833, 3.6086448500603283]]
W1 = np.array(WW1)
WW2 = [[-2.743378556128636, 3.1425161444122316, -2.627828360415732, 0.09232650220933172, -2.599441658798014], [2.3383213228206916, 0.2267866768746946, 2.312292900938772, 1.1604793327571832, 2.908623146513461], [0.9155472094601199, 2.7211390767861645, 1.2464767966269057, -2.270880549482893, -0.8659137268106372], [-1.3308017850409626, 1.6489010542466929, 2.64608828666525, 0.9680813752191828, -3.0933305882007684], [2.349268026436934, 3.8070368185831476, 1.4600820168604065, 0.7769201845593584, -1.8051509837165858], [1.2672648765661367, -0.1931989390179844, 1.4157933846053121, -4.799435019276018, 0.22491003645389798], [-0.83279695357567, -4.808076885412101, -5.940797965748966, 0.5390839991461437, 1.7331297201081513], [2.637109416259557, 1.3704867207512443, -2.1086041328828697, -1.0010614457574387, 1.2449530166199227]]
W2 = np.array(WW2)
WW3 = [[-2.9669566454698617, -1.1383495161493686, 2.2976958206414424], [-1.3693181859442165, -0.026975306514726297, -0.581380784058322], [1.5271848011794458, -1.2324498295809263, -1.940825924577773], [2.613422278632524, -4.4387747851601675, -0.2962734457140871], [-1.0169690397340707, 4.786943213702008, 0.016876316173558406]]
W3 = np.array(WW3)
WW4 = [[-0.6268015612761507], [-3.2642028454030316], [0.565043179552989]]
W4 = np.array(WW4)

def forward(X, W1, W2, W3, W4):
    h1 = f(np.dot(X, W1))
    h2 = f(np.dot(h1, W2))
    h3 = f(np.dot(h2, W3))
    out = f(np.dot(h3, W4))
    return out


test = ["holy_shit", "great", "bloody", "cunt", "fat", "fuck_you", "hello", "nigger", "dfsdf sdfsdf"]

words2 = "Fuck you cunt".split(" ")
print words2
T = np.array(parseMessage(words2))
print T

print forward(T, W1, W2, W3, W4)
